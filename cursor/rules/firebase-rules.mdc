---
description: 
globs: 
alwaysApply: false
---
# Firebase Implementation Rules
Date Last Modified: March 20, 2025

## Authentication
- Use Firebase Authentication for all user management
- Implement proper email/password and google authentication flows
- Store minimal user data in auth profiles
- Keep extended user data in Firestore
- Implement proper session management and token refresh
- Use custom claims for role-based access control

## Firestore Database
- Use a flat data structure whenever possible
- Implement proper data denormalization for frequently accessed data
- Keep document sizes small (under 1MB)
- Use subcollections for hierarchical data
- Implement proper indexing for frequently queried fields
- Use composite indexes for complex queries
- Write specific security rules for each collection
- Implement proper data validation before writing to the database

## Firebase Storage
- Implement proper file size limitations
- Use content-type validation for uploaded files
- Implement proper file naming conventions
- Store file metadata in Firestore
- Use Firebase Storage security rules to restrict access
- Implement proper file deletion when associated data is deleted
- Use resumable uploads for large files
- Implement proper progress tracking for file uploads

## Security
- Never expose Firebase config in client-side code
- Use Firebase Admin SDK for server-side operations
- Implement proper data access controls based on user roles
- Never trust client-side data validation alone
- Always validate data on the server side
- Use Firebase Functions for sensitive operations